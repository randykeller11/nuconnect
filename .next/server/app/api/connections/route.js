(()=>{var e={};e.id=8405,e.ids=[8405],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13779:(e,t,r)=>{"use strict";r.d(t,{F2:()=>n,Ik:()=>i,QK:()=>d,S_:()=>o,T2:()=>a,Y:()=>u,cd:()=>c});var s=r(70762);s.z.object({user_id:s.z.string().uuid(),name:s.z.string().min(1),profile_photo_url:s.z.string().url().optional(),interests:s.z.array(s.z.string()).default([]),career_goals:s.z.string().optional(),mentorship_pref:s.z.enum(["seeking","offering","both","none"]).default("none"),contact_prefs:s.z.record(s.z.any()).default({})}),s.z.object({name:s.z.string().min(1),description:s.z.string().optional(),location:s.z.string().optional(),date_time:s.z.string().datetime(),created_by:s.z.string().uuid().optional()});let n=s.z.object({event_id:s.z.string().uuid().optional(),visibility:s.z.enum(["public","private"]).default("public"),created_by:s.z.string().uuid().optional(),name:s.z.string().min(1),description:s.z.string().optional()}),i=s.z.object({room_id:s.z.string().uuid(),user_id:s.z.string().uuid()});s.z.object({room_id:s.z.string().uuid(),user_a:s.z.string().uuid(),user_b:s.z.string().uuid(),match_score:s.z.number().min(0).max(1).optional(),shared_topics:s.z.array(s.z.string()).default([]),ai_explanation:s.z.string().optional()});let o=s.z.object({match_id:s.z.string().uuid(),user_id:s.z.string().uuid(),payload:s.z.record(s.z.any())}),a=s.z.object({user_id:s.z.string().uuid(),match_id:s.z.string().uuid(),notes:s.z.string().optional()}),u=s.z.object({user_id:s.z.string().uuid(),type:s.z.enum(["priority_visibility","extra_matches","save_contact_card"]),amount_cents:s.z.number().int().default(0),status:s.z.string().default("not_applicable")}),c=s.z.object({email:s.z.string().email(),password:s.z.string().min(6),firstName:s.z.string().min(1),lastName:s.z.string().min(1),phone:s.z.string().optional(),relationshipStatus:s.z.string().optional()}),d=s.z.object({email:s.z.string().email(),password:s.z.string().min(6)})},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72799:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>b,routeModule:()=>g,serverHooks:()=>_,workAsyncStorage:()=>z,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>p,POST:()=>l});var n=r(96559),i=r(48088),o=r(37719),a=r(32190),u=r(93939),c=r(13779);let d=(0,u.createClient)("https://estgdcessxwbpdcgpxsa.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function p(e){try{let{searchParams:t}=new URL(e.url),r=t.get("userId");if(!r)return a.NextResponse.json({error:"Missing userId parameter"},{status:400});let{data:s,error:n}=await d.from("connections").select(`
        *,
        matches (
          *,
          contact_shares (*)
        )
      `).eq("user_id",r).order("created_at",{ascending:!1});if(n)throw Error(`Supabase error: ${n.message}`);return a.NextResponse.json({connections:s})}catch(e){return console.error("Error fetching connections:",e),a.NextResponse.json({error:"Failed to fetch connections"},{status:500})}}async function l(e){try{let t=await e.json(),r=c.T2.parse(t),{data:s,error:n}=await d.from("connections").upsert(r,{onConflict:"user_id,match_id"}).select().single();if(n)throw Error(`Supabase error: ${n.message}`);return a.NextResponse.json(s,{status:201})}catch(e){if(console.error("Error creating connection:",e),e instanceof Error&&e.message.includes("validation"))return a.NextResponse.json({error:"Invalid connection data provided"},{status:400});return a.NextResponse.json({error:"Failed to create connection"},{status:500})}}let g=new n.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/connections/route",pathname:"/api/connections",filename:"route",bundlePath:"app/api/connections/route"},resolvedPagePath:"/Users/dub_ceo/Desktop/nuconnect/app/api/connections/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:z,workUnitAsyncStorage:m,serverHooks:_}=g;function b(){return(0,o.patchFetch)({workAsyncStorage:z,workUnitAsyncStorage:m})}},78335:()=>{},93939:e=>{"use strict";e.exports=require("@supabase/supabase-js")},96487:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,580,762],()=>r(72799));module.exports=s})();