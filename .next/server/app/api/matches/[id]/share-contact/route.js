(()=>{var t={};t.id=226,t.ids=[226],t.modules={3295:t=>{"use strict";t.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13779:(t,e,r)=>{"use strict";r.d(e,{F2:()=>i,Ik:()=>a,QK:()=>d,S_:()=>n,T2:()=>o,Y:()=>u,cd:()=>c});var s=r(70762);s.z.object({user_id:s.z.string().uuid(),name:s.z.string().min(1),profile_photo_url:s.z.string().url().optional(),interests:s.z.array(s.z.string()).default([]),career_goals:s.z.string().optional(),mentorship_pref:s.z.enum(["seeking","offering","both","none"]).default("none"),contact_prefs:s.z.record(s.z.any()).default({})}),s.z.object({name:s.z.string().min(1),description:s.z.string().optional(),location:s.z.string().optional(),date_time:s.z.string().datetime(),created_by:s.z.string().uuid().optional()});let i=s.z.object({event_id:s.z.string().uuid().optional(),visibility:s.z.enum(["public","private"]).default("public"),created_by:s.z.string().uuid().optional(),name:s.z.string().min(1),description:s.z.string().optional()}),a=s.z.object({room_id:s.z.string().uuid(),user_id:s.z.string().uuid()});s.z.object({room_id:s.z.string().uuid(),user_a:s.z.string().uuid(),user_b:s.z.string().uuid(),match_score:s.z.number().min(0).max(1).optional(),shared_topics:s.z.array(s.z.string()).default([]),ai_explanation:s.z.string().optional()});let n=s.z.object({match_id:s.z.string().uuid(),user_id:s.z.string().uuid(),payload:s.z.record(s.z.any())}),o=s.z.object({user_id:s.z.string().uuid(),match_id:s.z.string().uuid(),notes:s.z.string().optional()}),u=s.z.object({user_id:s.z.string().uuid(),type:s.z.enum(["priority_visibility","extra_matches","save_contact_card"]),amount_cents:s.z.number().int().default(0),status:s.z.string().default("not_applicable")}),c=s.z.object({email:s.z.string().email(),password:s.z.string().min(6),firstName:s.z.string().min(1),lastName:s.z.string().min(1),phone:s.z.string().optional(),relationshipStatus:s.z.string().optional()}),d=s.z.object({email:s.z.string().email(),password:s.z.string().min(6)})},19227:(t,e,r)=>{"use strict";r.r(e),r.d(e,{patchFetch:()=>_,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>z});var s={};r.r(s),r.d(s,{POST:()=>p});var i=r(96559),a=r(48088),n=r(37719),o=r(32190),u=r(93939),c=r(13779);let d=(0,u.createClient)("https://estgdcessxwbpdcgpxsa.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function p(t,{params:e}){try{let{userId:r,contactInfo:s}=await t.json(),i=(await e).id;if(!r||!s)return o.NextResponse.json({error:"Missing userId or contactInfo"},{status:400});let a=c.S_.parse({match_id:i,user_id:r,payload:s}),{data:n,error:u}=await d.from("contact_shares").upsert(a,{onConflict:"match_id,user_id"}).select().single();if(u)throw Error(`Supabase error: ${u.message}`);let{data:p,error:l}=await d.from("contact_shares").select("*").eq("match_id",i);if(l)throw Error(`Failed to check mutual shares: ${l.message}`);let g=p&&p.length>=2;return o.NextResponse.json({success:!0,contactShare:n,isMutual:g,mutualContacts:g?p:null})}catch(t){if(console.error("Error sharing contact:",t),t instanceof Error&&t.message.includes("validation"))return o.NextResponse.json({error:"Invalid contact share data"},{status:400});return o.NextResponse.json({error:"Failed to share contact"},{status:500})}}let l=new i.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/matches/[id]/share-contact/route",pathname:"/api/matches/[id]/share-contact",filename:"route",bundlePath:"app/api/matches/[id]/share-contact/route"},resolvedPagePath:"/Users/dub_ceo/Desktop/nuconnect/app/api/matches/[id]/share-contact/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:g,workUnitAsyncStorage:z,serverHooks:m}=l;function _(){return(0,n.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:z})}},29294:t=>{"use strict";t.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:t=>{"use strict";t.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},93939:t=>{"use strict";t.exports=require("@supabase/supabase-js")},96487:()=>{}};var e=require("../../../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),s=e.X(0,[4447,580,762],()=>r(19227));module.exports=s})();