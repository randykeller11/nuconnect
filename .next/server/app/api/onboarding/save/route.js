(()=>{var e={};e.id=7059,e.ids=[7059],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},28086:(e,s,r)=>{"use strict";r.d(s,{d:()=>n});var t=r(34386),o=r(44999);async function n(){let e=await (0,o.UL)();return(0,t.createServerClient)("https://estgdcessxwbpdcgpxsa.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlteGhnZGNlem1jcnJ6cWRoYmxlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2OTQ4ODAsImV4cCI6MjA3MDI3MDg4MH0.7yDxOxI4pkbFmUDUOfFpCVYo53NnSB6uGpBrhnBID4E",{cookies:{getAll:()=>e.getAll(),setAll(s){try{s.forEach(({name:s,value:r,options:t})=>e.set(s,r,t))}catch{}}}})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},79899:(e,s,r)=>{"use strict";r.r(s),r.d(s,{patchFetch:()=>y,routeModule:()=>m,serverHooks:()=>h,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>v});var t={};r.r(t),r.d(t,{POST:()=>d,dynamic:()=>u,runtime:()=>l});var o=r(96559),n=r(48088),i=r(37719),a=r(28086),c=r(93939),p=r(32190);let l="nodejs",u="force-dynamic";async function d(e){try{let s=await (0,a.d)(),{data:{user:r},error:t}=await s.auth.getUser();if(t||!r)return p.NextResponse.json({error:"Unauthorized"},{status:401});let o=(0,c.createClient)("https://estgdcessxwbpdcgpxsa.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}}),{profileData:n,isPartial:i=!1}=await e.json();if(!n)return p.NextResponse.json({error:"Missing profileData"},{status:400});let l={user_id:r.id,updated_at:new Date().toISOString()};n.role&&n.role.trim()?l.name=`${n.role.trim()}${n.company&&n.company.trim()?` at ${n.company.trim()}`:""}`:n.company&&n.company.trim()?l.name=`Professional at ${n.company.trim()}`:l.name="Professional",n.interests&&n.interests.length>0&&(l.interests=n.interests),(n.objectives?.[0]||n.career_goals)&&(l.career_goals=n.objectives?.[0]||n.career_goals),(n.objectives||n.seeking)&&(l.mentorship_pref=n.objectives?.includes("Mentor Others")?"offering":n.seeking?.includes("Mentor")?"seeking":"none");let u={};n.role&&(u.role=n.role),n.company&&(u.company=n.company),n.location&&(u.location=n.location),n.headline&&(u.headline=n.headline),n.industries&&(u.industries=n.industries),n.skills&&(u.skills=n.skills),n.seniority&&(u.seniority=n.seniority),n.objectives&&(u.objectives=n.objectives),n.seeking&&(u.seeking=n.seeking),void 0!==n.openness&&(u.openness=n.openness),n.introStyle&&(u.introStyle=n.introStyle),void 0!==n.enableIcebreakers&&(u.enableIcebreakers=n.enableIcebreakers),void 0!==n.showLinkedIn&&(u.showLinkedIn=n.showLinkedIn),void 0!==n.showCompany&&(u.showCompany=n.showCompany),Object.keys(u).length>0&&(l.contact_prefs=u);let{data:d,error:m}=await o.from("profiles").upsert(l,{onConflict:"user_id",ignoreDuplicates:!1}).select().single();if(m)return console.error("Profile save error:",m),p.NextResponse.json({error:"Failed to save profile to database",details:m.message},{status:500});return p.NextResponse.json({success:!0,profile:d,isOnboardingComplete:!i&&l.name&&l.interests&&l.career_goals})}catch(e){return console.error("Error saving profile:",e),p.NextResponse.json({error:"Failed to save profile",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/onboarding/save/route",pathname:"/api/onboarding/save",filename:"route",bundlePath:"app/api/onboarding/save/route"},resolvedPagePath:"/Users/dub_ceo/Desktop/nuconnect/app/api/onboarding/save/route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:g,workUnitAsyncStorage:v,serverHooks:h}=m;function y(){return(0,i.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:v})}},93939:e=>{"use strict";e.exports=require("@supabase/supabase-js")},96487:()=>{}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[4447,580,3410],()=>r(79899));module.exports=t})();